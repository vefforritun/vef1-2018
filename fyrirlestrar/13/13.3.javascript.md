---
title: Fyrirlestur 13.3 ‚Äì JavaScript upprifjun
---

# Fyrirlestur 13.3 ‚Äì JavaScript upprifjun

## Vefforritun 1 ‚Äî T√ñL107G

### √ìlafur Sverrir Kjartansson, [osk@hi.is](mailto:osk@hi.is)

---

> JavaScript er t√∫lka√∞ skriftum√°l, byggt √° pr√≥t√≥t√Ωpum me√∞ d√Ωnam√≠skar, veikar t√Ωpur, fyrsta flokks f√∂ll og stu√∞ning vi√∞ hlutbunda-, gildinga- og fallaforritun

***

## Java VS. JavaScript

M√∂rg atri√∞i eru √≥l√≠k, en √æa√∞ sem skiptir mestu m√°li √≠ fyrstu:

* Java er _√æ√Ωtt_ en JavaScript er _t√∫lka√∞_
  - JavaScript k√≥√∞i er t√∫lka√∞ur √≠ hverri keyrslu
* Breytur √≠ Java hafa t√Ωpu, _gildi_ √≠ JavaScript hafa t√Ωpu

***

## JavaScript t√∫lkar

* H√∂fum a√∞gang a√∞ JavaScript t√∫lk vafra √≠ gegnum DevTools
  - Opnum DevTools og f√∂rum √≠ `console` og skrifum skipanir og forrit
* Node.js er l√≠ka me√∞ JavaScript t√∫lk, getum keyrt me√∞ `node` √≠ terminal

***

## T√Ωpur

Breytur √≠ JavaScript hafa ekki t√Ωpu, _gildi_ hafa t√Ωpu:

* `number`, `string`
* `boolean`, `undefined`,
* `function` e√∞a `object`

***

## number

* Scientific notation:
  - `1.25e6 // 1.25 * 10^6 = 1250000`
* `Infinity` og `-Infinity` ‚Äì gildi sem geta komi√∞ upp √≠ √∫treikningum
  - `9e999 // Infinity`
  - `1/0 // Infinity`

***

## number ‚Äì NaN

* `NaN` ‚Äì ‚ÄûNot a number‚Äú, skila√∞ √æegar ekki er h√¶gt a√∞ reikna
  - `0 / 0 // NaN`
  - `1 - 'a' // NaN`

***

## Strengir ‚Äì string

* Skilgreinum strengi innan `'` e√∞a `"`
  - `'Hall√≥, heimur!'` e√∞a `"Hall√≥, heimur!"`
* Notum `\` til a√∞ _escapea_ s√©rstaka stafi e√∞a s√©rst√∂k t√°kn (t.d. newline e√∞a tab)
  - `"Hall√≥, \"heimur\""`

***

## Boolean

* `true` e√∞a `false`
* Notum oft √≠ fl√¶√∞ist√Ωringu √æegar vi√∞ berum saman gildi

***

## Hj√°lparf√∂ll

* H√∂fum a√∞gang a√∞ hj√°lparf√∂llum sem leyfa okkur a√∞ vinna me√∞ strengi og t√∂lur
* Eru partur af _umhverfinu_
* `isNaN()`, `isFinite()`, `parseInt()` o.fl

***

## undefined

* Gildi √° _breytum_ sem ekki hafa veri√∞ skilgreindar
* Gildi √° eigindum _hluta_ sem ekki hafa veri√∞ skilgreindir
* `typeof baz // "undefined"`

***

## null

* Gildi sem stendur fyrir a√∞ v√≠svitandi fjarveru gildis
* Getum lent √≠ a√∞ f√° _null reference_ villur ef vi√∞ h√∂ldum a√∞ eitthva√∞ s√© ekki null
  - `null.length`
  - `Uncaught TypeError: Cannot read property 'length' of null`

***

## Veikar t√Ωpur

* √ûegar vi√∞ _notum_ gildi getur √æeim veri√∞ _kasta√∞ √≥beint_
  - Svipa√∞ og `(int)foo` √≠ Java og C nema _√≥beint_
* Reglur um hvernig √æeim er kasta√∞, _type coercion_

***

## √ñruggar t√Ωpur

* F√°um ekki t√Ωpu villur √° keyrslut√≠ma
* _Type coercion_ √ævingar t√Ωpur til a√∞ spila saman
* Reglur skilgreindar √≠ spec en geta komi√∞ manni √° √≥vart
  - [MDN: Equality comparisons and sameness](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness)

***

## Samanbur√∞ur

* Getum athuga√∞ hvort t√∂lur e√∞a strengir s√©u minni e√∞a st√¶rri en a√∞rir
  - `3 > 2 // true`
  - `'foo' > 'bar' // false`
* Samanbur√∞ur √° strengjum er ekki ‚Äûr√©ttur‚Äú, st√≥r stafur er alltaf ‚Äûminni en‚Äú l√≠till o.fl.

***

* H√∂fum jafnt e√∞a st√¶rra `>=` og jafnt e√∞a minna `<=` virkja
* Fyrir j√∂fnu√∞ og √≥j√∂fnu√∞ h√∂fum vi√∞ `!=`, `==`, `!==`, `===`

***

* Samanbur√∞ur me√∞ `==` og `!=` mun byrja √° a√∞ kasta b√°√∞um gildum
* Samanbur√∞ur me√∞ `===` og `!==` mun byrja √° a√∞ bera saman t√Ωpur og passa upp√° a√∞ √æ√¶r passi (e√∞a ekki)
  - __Notum fyrir allan samanbur√∞!__

***

## Truthy & falsy

* √ûegar vi√∞ erum me√∞ hluti sem haga s√©r eins og `boolean` √°n √æess a√∞ vera √æa√∞, t√∂lum vi√∞ um a√∞ √æeir s√©u `truthy` e√∞a `falsy`
* Byggir √° _type coercion_

***

## Falsy

* `false`
* `0`
* `'' // t√≥mi strengur`
* `null`
* `undefined`
* `NaN`

***

## Truthy

* Allt sem er ekki falsy
* `null` og `undefined` eru ekki j√∂fn neinu nema sj√°lfu s√©r
* `NaN` er ekki jafnt neinu, ekki einu sinni sj√°lfu s√©r

***

## L√≥g√≠skir virkjar

* Getum unni√∞ me√∞ boolean gildi me√∞ `and`, `or` og `not` virkjum
* `&&` er `and` virkji sem er tv√≠st√¶√∞ur og skilar `true` √æ√° og √æv√≠ a√∞eins a√∞ b√¶√∞i st√∂k s√©u `true`, annars `false`
  - `true && false // false`
  - `true && true // true`

***

* `||` er `or` virkji sem er tv√≠st√¶√∞ur og skilar `true` ef anna√∞ gildi er `true`
  - `true || false // true`
  - `false || false // false`

***

## Neitun

* `!` er neitunarvirkji, kastar seg√∞ √∫r `true` √≠ `false` og √∂fugt
  - `!true // false`
* Virkar fyrir √∂ll gildi √∫t af truthy og falsy

***

## Seg√∞ir (expressions)

* Seg√∞ er k√≥√∞ab√∫tur sem skilar gildi
  - Tala, stengur o.fl.
* Seg√∞ir geta innihaldi√∞ a√∞rar seg√∞ir
  - `1 + 1`

***

## Skipanir (statement)

* Skipanir eru samans√∂fn af seg√∞um
* Forrit eru samans√∂fn af skipunum
* Einfaldasta skipunin (og seg√∞in, og forriti√∞) er seg√∞ me√∞ sem√≠kommu
  - `1;`

***

## Sem√≠komma

* Sem√≠komma er _statement terminator_ einsog √≠ Java e√∞a C
* Ekki krafa, _Automatic Semicolon Insertion_ s√©r um a√∞ setja inn ef sleppt
* √ûarf a√∞ passa, vi√∞ √¶ttum alltaf a√∞ setja inn sem√≠kommu

***

## Breytur

* Skilgreinum breytur me√∞ lykilor√∞unum `let`, `const` e√∞a `var`
  - `let foo;`
* Getum aukalega gefi√∞ gildi √∫r seg√∞
  - `let foo = 'bar';`
  - `const FOO = 1; // breytun√∂fn eru h√°stafan√¶m`

***

## D√Ωnam√≠skar breytur

√ûar sem breytur √≠ JavaScript hafa ekki t√Ωpu getum vi√∞ breytt gildum √æeirra.

<!-- eslint-skip -->

```javascript
let a = 'hall√≥ heimur';
```

<!-- eslint-skip -->

```javascript
a = 1;
```

<!-- eslint-skip -->

```javascript
a = false;
```

<!-- eslint-skip -->

```javascript
a = undefined;
```

***

## Umhverfi (environment)

* √ûegar vi√∞ keyrum JavaScript forritin okkar gerist √æa√∞ √≠ √°kve√∞nu _umhverfi_
* Ekki t√≥mt, inniheldur sta√∞la√∞a hluti og f√∂ll sem eiga vi√∞ umhverfi√∞
  - √ç vafra h√∂fum vi√∞ a√∞ger√∞ir t.d. til a√∞ eiga vi√∞ vefs√≠√∞una, bundi√∞ vi√∞ _window_
  - √ç node.js h√∂fum vi√∞ a√∞ger√∞ir t.d. til a√∞ eiga vi√∞ skr√°arkerfi√∞, bundi√∞ vi√∞ _process_

***

## Sta√∞la√∞ir hlutir og f√∂ll

* St√∂√∞lu√∞ f√∂ll eru t.d. `parseInt` og `parseFloat`
* Sta√∞la√∞ir hlutir eins og [`Math`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math), [`Number`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), [`Date`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) [og fleiri](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects)

***

## Fl√¶√∞ist√Ωringar & lykkjur

* H√∂fum a√∞gang a√∞ fl√¶√∞ist√Ωringum og lykkjum
  - l√≠kjast mj√∂g miki√∞ √æeim sem eru √≠ Java
* St√Ωrum fl√¶√∞i forrita og framkv√¶mum √≠tranir

***

* √ç lykkjum getum vi√∞ nota√∞:
  - `break` til a√∞ brj√≥tast √∫t/h√¶tta √≠ lykkju
  - `continue` til a√∞ sleppa rest af lykkju og halda √°fram √≠ n√¶stu

***

## while og do while lykkjur (loops)

* `while` og `do .. while` lykkjur leyfa okkur a√∞ endurtaka k√≥√∞a svo lengi sem einhver seg√∞ er s√∂nn
* `do .. while` mun alltaf keyra k√≥√∞a einu sinni √°√∞ur en seg√∞ er athugu√∞

***

## for

* `for` lykkjur eru s√©rh√¶f√∞ari og n√Ωta mj√∂g algent form √° lykkjum:
  - Setja byrjunargildi
  - Athuga n√∫verandi gildi
  - Uppf√¶ra gildi

***

## switch

* Ef vi√∞ h√∂fum k√≥√∞a sem notar `if` og `else if` miki√∞ getum vi√∞ nota√∞ `switch`

***

## F√∂ll

* _Blokkir_ af k√≥√∞a sem geta haft nafn
* Notum til a√∞ skipuleggja k√≥√∞a og draga √∫r endurtekningu
* Engar e√∞a fleiri f√¶ribreytur (vi√∞f√∂ng, argument)

***

* Hugsanlega me√∞ skilagildi, skilgreindu me√∞ `return`
  - Ef ekki skilar fall `undefined`
* Hlutir einsog flest anna√∞ og **geta √æv√≠ veri√∞ gildi breytu**

***

## Skilgreind f√∂ll

* Ef vi√∞ skilgreinum fall me√∞ `function` √°n √æess a√∞ binda vi√∞ breytu
* Getum kalla√∞ √≠ _√°√∞ur en_ skilgreint
  - √ñll f√∂ll eru fundin √°√∞ur en forrit er keyrt og √æ.a.l. a√∞gengileg

***

## Scope

* Breytur eru skilgreindar me√∞ _lexical scope_ per fall
  - Breytan er a√∞eins a√∞gengileg innan falls
* En a√∞eins ef breyta er skilgreind me√∞ `let`, `const` e√∞a `var`

***

* Ef ekki er breytan sett √≠ _global scope_
  - Getur valdi√∞ lei√∞inlegum b√∂ggum
* Breytur skilgreindar utan falla eru √≠ global scope

***

## var, let & const

* √Å√∞ur en `let` og `const` voru skilgreind var a√∞eins `var`
* `var` er skilgreint fyrir global scope e√∞a lexical scope falls
* `let` og `const` eru skilgreind fyrir block, eru _block scoped_

***

## Arrow functions

* Stuttur syntax fyrir f√∂ll me√∞ **fat arrow**: `() => {}`
  - Megum sleppa sviga ef ein f√¶ribreyta
  - Skila gildi ef eitt statement, annars `return`

***

## Nafnlaus f√∂ll

* Vi√∞ getum bundi√∞ f√∂ll vi√∞ breytur √°n √æess a√∞ gefa √æeim n√∂fn
  - _anonymous function_
* √ûar sem f√∂ll eru gildi getum vi√∞ l√≠ka skila√∞ _f√∂llum √∫r f√∂llum_

***

## F√¶ribreytur (parameters)

* F√¶ribreytur √° f√∂llum hafa ekki t√Ωpur heldur gildi√∞
* Fall getur √æv√≠ teki√∞ inn f√¶ribreytur sem geta veri√∞ _hva√∞a gildi sem er_
* Primitives eru _pass by value_
* Objects eru _pass by reference_

***

## Variadic functions

* Getum skilgreint f√∂ll sem taka √≥skilgreindan fj√∂lda af f√¶ribreytum
  - _variadic function_

***

## Innri f√∂ll

* Getum skilgreint f√∂ll _innan fall_
* Innri f√∂ll eru a√∞eins √≠ scope fyrir ytra fall
* Innri f√∂ll hafa a√∞gang a√∞ scope ytra falls

***

## Lokanir ‚Äì closures

* √ûegar vi√∞ h√∂fum innri f√∂ll √æ√° myndum vi√∞ _lokun_ um umhverfi √æess
* Innra fall hefur a√∞gang a√∞ ytra scope me√∞an √æa√∞ lifir
* Breytu n√∂fn √≠ innrif√∂llum skrifa yfir ytri

***

## Array

* Fylki leyfa okkur a√∞ safna hlutum √≠ ra√∞a√∞a lista
* B√∫um til array me√∞ `[]`
  - `const list = [];`

***

* N√°lgumst gildi innan fylkis me√∞ _bracket notation_
  - N√°lgumst eftir _index_, **byrjar fr√° 0**
  - `array[0]` n√°lgast fyrsta stak √≠ index 0, `array[1]` anna√∞ stak √≠ index 1 o.s.fr.
* `length` skilar fj√∂lda staka √≠ fylki, fr√° 0 til st√¶rsta index

***

## Properties

* N√¶stum √∂ll JavaScript gildi hafa _property_ (eigindi)
  - `'foo'.length`, `Math.min()`
* √ñll nema `null` og `undefined`
* Property n√°lgumst vi√∞ me√∞:
  - `.` ‚Äì _dot notation_
  - `['foo']` ‚Äì _bracket notation_

***

## Object

* Byrjum √° a√∞ hugsa um object √≠ JavaScript sem geymslu fyrir gildi √æar sem gildi √° s√©r nafn
* Skilgreinum me√∞ `{}`, innan √æess skilgreinum vi√∞ eigindi hluts me√∞ `heiti: gildi`
  - Ef heiti er √≥leyfilegt breytunafn skilgreinum vi√∞ sem streng
  - `gildi` eru √∂ll leyfileg gildi

***

* Eigindi eru oftast skilgreind eitt per l√≠nu til a√∞ auka lesanleika
  - Seinasta eigindi m√° hafa kommu √° eftir s√©r, kalla√∞ _trailing comma_
* Ef vi√∞ bi√∞jum um eigindi sem ekki er skilgreint √° hlut f√°um vi√∞ `undefined`
* Mj√∂g √≥l√≠kt `object` √≠ Java

***

## Rest parameters

* Ef vi√∞ skilgreinum parameter √≠ falli me√∞ `...` fyrir framan er √æa√∞ _rest parameter_
  - (parameter er skilgreiningin, argument er raun gildi√∞ sem sent er inn)
* Inniheldur _rest_ af argumentum √æegar kalla√∞ er √≠ falli√∞

***

## Spread operator

* Ef vi√∞ notum `...` fyrir utan parameter √≠ f√∂llum kallast √æa√∞ _spread operator_
* _Dreifir √∫r_ breytu
* Getum dreift √∫r `string` og `array`, ekki `object`, `number` og √∂√∞rum gildum

***

## Destructuring

* Ni√∞urbrot √° fylkjum og hlutum √≠ breytur
* Virkar einsog ma√∞ur myndi halda, dreifir √∫r hlutum √≠ √æ√¶r breytur sem ma√∞ur vill
* Getum skilgreint sj√°lfgefin gildi
* F√°um `undefined` ef ekkert gildi passar, ekki villu

***

## Villume√∞h√∂ndlun

* JavaScript hefur stu√∞ning vi√∞ `try catch` e√∞a `exceptions`
* K√≥√∞i getur _kasta√∞_ villum: innbygg√∞um og okkar eigin
* _Gr√≠pum_ villur og gerum eitthva√∞ √≠ √æeim

***

## Kasta villu

* K√∂stum villu me√∞ `throw`
  - Notum `Error`, innbygg√∞an hlut sem heldur utan um villur
  - `throw Error('villa');`
* F√°um _stacktrace_ me√∞ villum, hva√∞an √æ√¶r koma upp

***

## Gr√≠pa villu

* Ef vi√∞ gr√≠pum ekki villu _fl√Ωtur_ h√∫n upp √æar til h√∫n veldur usla √° efsta lagi
  - √ç versta falli stoppar keyrslu
* Getum _gripi√∞_ villur og gert eitthva√∞ vi√∞ √æ√¶r me√∞ `try catch`

***

## Regular expressions

* H√∂fum stu√∞ning vi√∞ _reglulegar seg√∞ir_ √≠ JavaScript
* Skilgreinum _mynstur_ sem er bori√∞ saman vi√∞ texta til a√∞ vinna me√∞ hann
  - Kraftmiki√∞, fl√≥ki√∞ og oft √≥skiljanlegt

***

## Einingar

* √ûegar vi√∞ vinnum me√∞ forrit er √æeim yfirleitt skipt upp √≠ einingar
* Safnar saman virkni √° einum sta√∞, inniheldur f√∂ll og breytur
* Skilgreinum API (Application Programming Interface) fyrir einingu

***

## Einingar ‚Äì kostir

* Einfaldar a√∞ hugsa um forriti√∞, √°kve√∞in eining gerir √°kve√∞in hlut
* Getur hj√°lpa√∞ vi√∞ a√∞ st√Ωra fl√¶kjustigi
  - √ûurfum ekki a√∞ ‚Äûhalda √∂llu forritinu √≠ hausnum‚Äú √≠ einu

***

* Skilgreinum _namespace_, minnkar l√≠kur √° a√∞ vi√∞ skemmum fyrir √∂√∞rum e√∞a a√∞rir skemmi fyrir okkur
  - S√©rstaklega √≠ JavaScript me√∞ _global_ og _local_ scope
* √ùtir undir endurn√Ωtingu √° k√≥√∞a

***

## Einingar ‚Äì √≥kostir

* Getur veri√∞ fl√≥ki√∞ a√∞ √°kve√∞a _hvernig_ og _hven√¶r_ skipta eigi forriti upp
* A√∞ skrifa gott API er erfitt
* L√¶rum h√¶gt og r√≥lega me√∞ √æv√≠ a√∞ skrifa sj√°lf og nota √∂nnur forritas√∂fn

***

## Immediately-invoked function expression

* E√∞a IIFE, ‚Äûiffy‚Äú
* Sj√°lfkeyrandi nafnlaus f√∂ll
* B√Ωr til fall sem heldur hlutum **utan** global scope
* Nota√∞ til a√∞ b√∫a til einingar √≠ JavaScript

***

## Module pattern

* N√Ωtir _lokun_ til a√∞ einangra forriti√∞ okkar
* A√∞eins nafni√∞ √° einingu √≠ global scope, ekki √∂ll f√∂ll e√∞a allar breytur
* Skilum hlut sem skilgreinir API forrits

***

## √ìsamstillt forritun (async programming)

* √ûegar forritin okkar fara a√∞ n√Ωta hluti sem eru ekki √≠ minni √æurfum vi√∞ a√∞ beita √∂√∞rum a√∞fer√∞um √≠ forritun
* √ûa√∞ er _hratt_ a√∞ s√¶kja hluti √≠ minni, _h√¶gara_ a√∞ s√¶kja √° disk og (oftast) enn _h√¶gara_ a√∞ s√¶kja yfir net
* B√≠√∞um ekki eftir √æv√≠ a√∞ bei√∞ni kl√°rist, n√Ωtum _√≥samstillta forritun_ (asynchronous/async programming)

***

## Samstillt forritun

* Forrit sem √æi√∞ hafi√∞ s√©√∞ hinga√∞ til eru samstillt‚Äî√æau keyra eina l√≠nu √≠ einu, eitt fall √≠ einu‚Äîeru l√≠nuleg
* H√¶gt a√∞ nota _√ær√¶√∞i_, JavaScript hefur **ekki** stu√∞ning vi√∞ √æ√°
* Notum async forritun me√∞ _event loop_ √° einum √ær√¶√∞i
* H√∂ldum CPU ekki uppteknum √° me√∞an be√∞i√∞

***

## Callbacks

* Ein lei√∞ til a√∞ vinna me√∞ async k√≥√∞a
* K√∂llum √≠ fall sem tekur langan t√≠ma me√∞ _callback_ argument
* Falli√∞ kallar √≠ _callback_ fall me√∞ ni√∞urst√∂√∞u √æegar b√∫i√∞
* Ef vi√∞ k√∂llum √≠ anna√∞ fall sem tekur langan t√≠ma √∫r _callback_ √æurfum vi√∞ anna√∞ callback o.s.fr. o.s.fr.

***

## setTimeout og setInterval

* Lei√∞ir √≠ JavaScript til a√∞ b√∫a til f√∂ll sem keyra √≠ framt√≠√∞inni
* `setTimeout(callback, delay)` kallar √≠ `callback` falli√∞ eftir `delay` millisek√∫ndur
* `setInterval(callback, interval)` kallar √≠ `callback` √° `interval` millisek√∫ndu fresti

***

## Promises

* Hj√∫pun fyrir gildi sem mun ver√∞a til √≠ framt√≠√∞inni
* Gerir asynchronous forritun au√∞veldari
* Fl√≥knara hugtak en callbacks

***

* √ûegar vi√∞ skilgreinum Promise k√∂llum vi√∞ √≠:
  - `resolve` me√∞ gildi √æegar vi√∞ h√∂fum loki√∞ a√∞ger√∞
  - `reject` me√∞ villu √æegar eitthva√∞ fer √∫rskei√∞is

***

* √ûegar vi√∞ vinnum me√∞ promise skilgreinum vi√∞
  - `then` callback til a√∞ vinna me√∞ gildi√∞, f√¶r gildi sem argument
  - `catch` callback til a√∞ vinna me√∞ villu, f√¶r villu sem argument
* `then` og `catch` eru f√∂ll √° Promise
* Getum sent promise gildi √° milli!

***

## HTML & JavaScript

√ç √¶skilegri r√∂√∞:

1. `<script src="scripts.js"></script>`
2. Innan `<script>...</script>`
3. For√∞ast a√∞ binda JavaScript vi√∞ element me√∞ on* attributes (t.d. `onclick`)

***

## A√∞ teikna s√≠√∞u

HTML, CSS og JavaScript er ekki s√≥tt √° augabrag√∞i, √≠ einfalda√∞ri mynd gerist:

* HTML er s√≥tt
* HTML er √æ√°tta√∞
* Hvert `<script>` er s√≥tt, √æ√°tta√∞ og keyrt

***

* Hvert `<link rel="stylesheet">` er s√≥tt og √æ√°tta√∞
* HTML √æ√°ttun l√≠kur
* S√≠√∞a er teiknu√∞

***

## DOM

* Document Object Model
* Leyfir forritum og skriptum a√∞ gera d√Ωnam√≠skar breytingar √° efni, skipulagi og √∫tliti skjala (oftast HTML e√∞a XML) gegnum API
* Hlutlaust √° platform og m√°l
* Sta√∞la√∞ af [W3C](http://www.w3.org/DOM/)

***

## `window`

* Stendur fyrir _gluggann_ sem inniheldur DOM tr√©√∞
* _Umhverfi√∞_ sem forritin okkar eru keyr√∞ √≠
* Heldur utan um global scope
* Hver gluggi e√∞a tab √≠ vafra hefur eigin `window`

***

## HTML

* N√°lgumst DOM √≠ gegnum `document` hlutinn √° `window`
* Hvert element er _n√≥√∞a_ (node) √≠ _DOM tr√©_
  - `nodeType` segir til um ger√∞ n√≥√∞u, t.d. `1` er `ELEMENT_NODE` og `3` er `TEXT_NODE`
  - Fastar skilgreindir √° `Node`, t.d. `Node.ELEMENT_NODE`

***

## Fer√∞ast um DOM

Hver n√≥√∞a hefur v√≠sanir √≠ foreldri, b√∂rn og systkini:

* `parentNode` ‚Äì foreldri n√≥√∞u
* `childNodes` ‚Äì fylki af b√∂rnum n√≥√∞u, ef n√≥√∞a er
* `lastChild` ‚Äì seinasta barn n√≥√∞u
* `previousSibling` ‚Äì  fyrra systkini n√≥√∞u
* o.fl.

***

![Fer√∞ast um DOM](img/html-links.svg)

***

## Finna element

* Oftast √æurfum vi√∞ a√∞ finna √°kve√∞in element, ekki √≠tra gegnum √æau √∂ll
* `document` og element hafa f√∂ll sem leyfa okkur a√∞ leita eftir √Ωmsum lei√∞um

***

## querySelector

* Leitar eftir **CSS selector** a√∞ _fyrsta_ elementi sem passar (d√Ωpt fyrst)
* `document.querySelector('.important')` til a√∞ leita √° allri s√≠√∞u
* `element.querySelector('.important')` til a√∞ finna undir √°kve√∞nu `element`

***

## Leita√∞ √≠ trj√°m

* √ûegar vi√∞ leitum √≠ trj√°m er tvennt √≠ bo√∞i:
  - _D√Ωpt first_ (depth first), fari√∞ eins dj√∫pt og h√¶gt er √° grein √°√∞ur en n√¶sta grein er sko√∞u√∞
  - _Breidd fyrst_ (breadth first), fari√∞ eins breitt og h√¶gt er √°√∞ur en fari√∞ er a√∞ sko√∞a b√∂rn greinar

***

## querySelectorAll

* Leitar eftir CSS selector a√∞ _√∂llum_ elementum sem passar
* Skilar _stats√≠skum_ `NodeList`, ekki lifandi
* `document.querySelectorAll('div')` til a√∞ leita √° allri s√≠√∞u
* `element.querySelectorAll('div')` til a√∞ finna undir √°kve√∞nu `element`

***

## A√∞ b√∫a til element

* `document.createElement(element)` ‚Äì b√Ωr til n√Ωtt element sem vi√∞ getum √°tt vi√∞
* `document.createTextNode(text)` ‚Äì b√Ωr til texta n√≥√∞u
* Notum s√≠√∞an f√∂ll √° node til a√∞ b√¶ta vi√∞ DOMi√∞, t.d. `appendChild`

***

## JavaScript og CSS

* Vi√∞ getum breytt CSS beint √° elementi
* H√∂fum a√∞gang a√∞ `style` hlut √° n√≥√∞u, `node.style`
* Yfirleitt viljum vi√∞ ekki gera √æa√∞
  - B√≥kstaflega setur st√≠la √° element einsog me√∞ `style` attribute
* Betra a√∞ breyta √æv√≠ hva√∞a `class` eru √° element

***

## Forrit sem breg√∞ast vi√∞ atbur√∞um

* √ûegar vi√∞ skrifum fl√≥knari forrit t√∂kum vi√∞ yfirleitt vi√∞ skipunum e√∞a g√∂gnum fr√° notendum
* Hvernig getur forriti√∞ okkar vita√∞ √æegar slegi√∞ er √° takka e√∞a √Ωtt √° m√∫sarhnapp?
  - S√≠fellt a√∞ athuga hvort b√∫i√∞ s√© a√∞ hreyfa m√∫s e√∞a smella √° takka? üò´

***

* Notum _atbur√∞i_ (events) til a√∞ breg√∞ast vi√∞ hlutum sem gerast √° einhverjum t√≠mapunkti √≠ framt√≠√∞inni
* Atbur√∞ir gerast √≥samstillt‚Äîeru async!

***

## Atbur√∞ir ‚Äì events

* Getum fylgst me√∞ atbur√∞um...
  - sem vafrinn veldur
  - sem notandi veldur
* Skr√°um √æ√°tt√∂ku me√∞ `addEventListener` falli √° n√≥√∞um

***

## Taka √æ√°tt √≠ atbur√∞um

* Skr√°um a√∞ vi√∞ viljum me√∞h√∂ndla vissa tegund af atbur√∞ √° √°kve√∞num n√≥√∞um
* √ûegar atbur√∞ur gerist eru allir √æeir sem skr√°√∞ sig hafa l√°tnir vita √≠ (flestum tilfellum) FIFO (first‚Äìin, first‚Äìout) r√∂√∞
* A√∞eins ein me√∞h√∂ndlun √° s√©r sta√∞ √≠ einu

***

## Uppl√Ωsingar um atbur√∞

* F√°um hlut me√∞ uppl√Ωsingum um atbur√∞ sem argument √≠ fall
  - Oftast kalla√∞ `e` e√∞a `event`
* Uppl√Ωsingar eru t.d. um hva√∞a lykil var slegi√∞ √° lyklabor√∞, e√∞a hva√∞a takka √° m√∫s

---

## HTTP

* [B√∫i√∞ til af Tim Berners-Lee](B√∫i√∞ til af Tim Berners-Lee) √≠ sambandi vi√∞ HTML
* Fyrst skjala√∞ sem √∫tg√°fa 0.9 1991
* [RFC 1945](http://tools.ietf.org/html/rfc1945) skilgreinir HTTP 1.0 √°ri√∞ 1996
* [RFC 2616](http://tools.ietf.org/html/rfc2068) skilgreinir HTTP 1.1 √°ri√∞ 1999

***

## Request‚Äîresponse

* HTTP byggir √° request‚Äîresponse milli client og server
* Client sendir request √° server
* Server framkv√¶mir a√∞ger√∞ir og sendir response √° client

***

## HTTP a√∞fer√∞ir

* `GET` ‚Äì bi√∞ur um s√≠√∞u, lang mest nota√∞a a√∞fer√∞in!
* `POST` ‚Äì Bi√∞ur server um a√∞ taka vi√∞ g√∂gnum √≠ request sem n√Ωrri einingu. T.d. n√Ωtt svar vi√∞ umr√¶√∞u√ær√¶√∞i e√∞a n√Ω g√∂gn √≠ gagnagrunni

***

## Hausar ‚Äì headers

* Sendir b√¶√∞i √≠ request og response
* Heiti og gildi √≠ texta, a√∞skili√∞ me√∞ tv√≠punkt
  - `Connection: close`

***

## St√∂√∞uk√≥√∞ar ‚Äî status codes

√ûegar √æj√≥nn svarar me√∞ response gefur hann upp st√∂√∞uk√≥√∞a, sem t√∂lu og lesanlegan texta

* `1xx` ‚Äì Til uppl√Ωsinga
* `2xx` ‚Äì Gekk, success
* `3xx` ‚Äì √Åframsending, redirection
* `4xx` ‚Äì Villa hj√° client
* `5xx` ‚Äì Villa hj√° server

***

## URI

* Skilgreint √≠ [RFC 3986](https://www.ietf.org/rfc/rfc3986.txt)
* Uniform Resource Identifier ‚Äì strengur sem skilgreinir au√∞lind
  - Me√∞ nafni, sta√∞setningu e√∞a b√¶√∞i
  - _Au√∞lind_ er einhver eining sem vi√∞ viljum n√°lgast, t.d. HTML skjal, mynd

***

## JSON

* JavaScript Object Notation
* L√©tt gagna format sem er au√∞velt a√∞ lesa og skrifa, b√¶√∞i fyrir menn og v√©lar
* Byggir √° almennum gagnastr√∫kt√∫rum
  - Heiti/gildi p√∂rum (objects, dictionary, hash table o.s.fr.)
  - R√∂√∞u√∞um listum (array, vector o.s.fr.)

***

## Ajax

* _Asynchronous JavaScript and XML_
* Skilgreint 2005
  - [Ajax: A New Approach to Web Applications](http://adaptivepath.org/ideas/ajax-new-approach-web-applications/)
* √ç dag ekki ein t√¶kni heldur hugtaki√∞ a√∞ s√¶kja g√∂gn √≥samstillt (async) til a√∞ koma √≠ veg fyrir a√∞ hla√∞a allri s√≠√∞unni aftur

***

## Same-origin og CORS

* Same-origin policy segir til um a√∞ ekki megi hla√∞a g√∂gnum fr√° annari s√≠√∞u nema protocol, port og host s√© √æa√∞ sama
* Megum √æ√≥ v√≠sa √≠ og nota JavaScript, CSS, myndir o.fl.

***

## Cross-origin resource sharing (CORS)

* √ûar sem same-origin policy bannar sj√°lfgefi√∞ a√∞ s√¶kja g√∂gn _cross-origin_ √æurfum vi√∞ lei√∞ til a√∞ geta s√≥tt g√∂gn √° milli √æj√≥na
* CORS skilgreinir lei√∞ til a√∞ leyfa √æa√∞

***

## `fetch`

* [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) er n√Ωlegt API til a√∞ eiga ajax samskipti
* Mun √æ√¶gilegra API sem notar _promises_

***

## fetch notkun

* B√∫um til request, einfaldasta lei√∞in er einfaldlega `fetch(url)` sem framkv√¶mir `GET` √° `url` og skilar Promise
* Getum l√≠ka sent inn `options` hlut sem anna√∞ vi√∞fang og gert √æ√° t.d. `POST`
* F√°um til baka `response` hlut sem vi√∞ athugum `status` √° e√∞a hvort `response.ok` s√© `true` (ef status er 200‚Äì299)

***

* Eftir a√∞ vi√∞ f√°um response √æurfum vi√∞ a√∞ √°kve√∞a hvernig vi√∞ f√°um g√∂gnin
  - `JSON` me√∞ `response.json()`
  - Texta `response.text()`
  - Binary g√∂gn `response.blob()`
* Skilar allt Promise

***

## Villume√∞h√∂ndlun √≠ JS

* JavaScript hefur ekki eins villume√∞h√∂ndlun og HTML og CSS
* Ef eitthva√∞ brotnar eru l√≠kur √° a√∞ √æa√∞ hafi √°hrif √° _allt_
* Ver√∞um a√∞ hafa √≠ huga

***

## Unobtrusive JavaScript

Alveg eins og vi√∞ a√∞skiljum √∫tlit fr√° efni viljum vi√∞ a√∞skilja forrit fr√° efni.

Tengt progressive enhancement er hugtaki√∞ _unobtrusive JavaScript_.

* A√∞skilna√∞ur heg√∞unar fr√° markupi
* Sem minnst f√≥tspor ‚Äî ekki skilgreina √≠ global scope
* Athuga hvort virkni s√© studd og √æ√° b√¶ta henni vi√∞

***

## Fallaforritun

* Ein lei√∞ til a√∞ vinna me√∞ fl√¶kjustig
* Bl√∂ndum saman einf√∂ldum f√∂llum til a√∞ gera fl√≥kna hluti
* B√∫um til _abstraction_

***

## √Ü√∞ri f√∂ll ‚Äì Higher-order functions

* Gera a.m.k. anna√∞ af:
  - Taka inn eitt e√∞a fleiri fall sem argument
  - Skila falli
* √ñnnur f√∂ll eru ‚Äû√° fyrstu st√©tt‚Äú

***

## Hrein f√∂ll ‚Äì Pure Functions

* Skila alltaf sama √∫ttaki fyrir sama inntak
* √öttak veltur ekki √° st√∂√∞u e√∞a uppl√Ωsingum fyrir utan fall‚Äî√≥h√°√∞ umhverfi s√≠nu
* Fall veldur ekki breytingum √° umhverfi ‚Äì engar aukaverkanir

***

## Kostir fallaforritunnar

* Hugsum meira abstrakt ‚Äì √° h√¶rra stigi
* Minni h√°va√∞i og meiri uppl√Ωsingar
* Getum gert fyrir helling af ‚Äûvenjulegum‚Äú a√∞ger√∞um
* H√∂fum grunn f√∂ll til sta√∞ar √≠ m√°linu

***

## Hlutir og hj√∫pun

* Objects & encapsulation
* Ein af a√∞al hugmyndum hlutbundinnar forritunar er a√∞ skipta forritum upp og l√°ta hvern hluta bera √°byrg√∞ √° eigin st√∂√∞u
* Hj√∫pum virkni og fl√¶kjustig, vinnum me√∞ √≠ gegnum _interface_

***

## `this`

* `this` hagar s√©r √∂√∞ruv√≠si √≠ JavaScript en √≠ √∂√∞rum m√°lum
* Skilgreinist af √æv√≠ hvernig kalla√∞ er √≠ falli√∞
* Utan hluta er `this` global hluturinn, √æ.e. √æar sem allt er geymt (√≠ browser `window`)

***

## Apply & call

* Leyfir okkur a√∞ kalla √≠ f√∂ll me√∞ √°kve√∞nu `this`
* `apply` ‚Äì k√∂llum √≠ fall me√∞ gefnu `this` og _fylki_ af arguments
* `call` ‚Äì k√∂llum √≠ fall me√∞ gefnu `this` og _lista_ af arguments

***

## Bind

* Leyfir okkur a√∞ festa, _binda_, `this` fyrir f√∂ll
* Kemur okkur ekki √° √≥vart hva√∞ `this` er
* Getum l√≠ka bundi√∞ argument...

***

## Arrow f√∂ll

* Arrow f√∂ll eru √∂√∞ruv√≠si‚Äîendurskilgreina ekki `this`
* `this` er skilgreint eins og √æa√∞ var skilgreint √≠ scope kringum fall

***

## Pr√≥t√≥t√Ωpur

* Flestir hlutir hafa _pr√≥t√≥t√Ωpu_, hlutur sem geymir fleiri properties
* Ef vi√∞ bi√∞jum um property √° hlut sem er ekki skilgreint √° hlut er leita√∞ √° pr√≥t√≥t√Ωpu hans

***

## Pr√≥t√≥t√Ωpu ke√∞jan

* Hlutir f√° eigindi fr√° pr√≥t√≥t√Ωpunni en eigindi √° hlutnum hafa aldrei √°hrif √° ke√∞juna
  - Getum ekki skrifa√∞ yfir hluti √° pr√≥t√≥t√Ωpu
* A√∞ setja eigindi √° hlut setur √æa√∞ alltaf √° honum sj√°lfum

***

## Classes

* √ç ECMAScript 6 er `class` skilgreint
* _Syntactic sugar_ til a√∞ herma eftir klass√≠skum OO hlutum me√∞ pr√≥t√≥t√Ωpum
* `extends`, `constructor`, `super`, `static` og getters og setters
